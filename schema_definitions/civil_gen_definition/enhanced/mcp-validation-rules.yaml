# MCP Schema Validation Rules
# 생성된 스키마 검증 규칙 정의

version: "1.0"

# ============================================================================
# Enum 검증
# ============================================================================
enumValidation:
  # 정수 enum은 oneOf 형식 필수
  integerEnumMustUseOneOf:
    enabled: true
    message: "정수 enum은 반드시 oneOf 형식을 사용해야 합니다"
    fix:
      type: "auto-convert"
      from: "enum"
      to: "oneOf"
      requireLabels: true
      fallbackLabel: "Option {value}"   # 라벨 없으면 "Option 0" 형식

# ============================================================================
# 필수 속성 검증
# ============================================================================
requiredProperties:
  # 모든 필드에 x-ui.label 필수
  xuiLabel:
    enabled: true
    path: "x-ui.label"
    message: "x-ui.label이 필요합니다"
    fix:
      type: "generate-from-key"   # 필드명에서 자동 생성

  # 모든 필드에 x-ui.group 필수
  xuiGroup:
    enabled: true
    path: "x-ui.group"
    message: "x-ui.group이 필요합니다"
    fix:
      type: "set-default"
      value: "General"

# ============================================================================
# 타입 검증
# ============================================================================
typeValidation:
  # 접두사와 타입 일치 확인
  prefixTypeMatch:
    enabled: true
    rules:
      - prefix: "i"
        expectedType: "integer"
        message: "i로 시작하는 필드는 integer 타입이어야 합니다"
      - prefix: "b"
        expectedType: "boolean"
        message: "b로 시작하는 필드는 boolean 타입이어야 합니다"

# ============================================================================
# 스키마 구조 검증
# ============================================================================
structureValidation:
  # $schema 필수
  requireSchema:
    enabled: true
    value: "http://json-schema.org/draft-07/schema#"
  
  # title 권장
  recommendTitle:
    enabled: true
    level: "warning"
  
  # required 배열이 properties에 존재하는지 확인
  requiredFieldsExist:
    enabled: true
    message: "required에 있는 필드가 properties에 없습니다"
