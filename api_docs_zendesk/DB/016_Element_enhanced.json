{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ELEM",
  "type": "object",
  "required": ["TYPE", "MATL", "NODE"],
  "properties": {
    "TYPE": {
      "type": "string",
      "enum": ["BEAM", "TRUSS", "TENSTR", "COMPTR", "PLATE", "WALL", "PLSTRS", "PLSTRN", "AXISYM", "SOLID"],
      "default": "BEAM",
      "x-ui": {
        "label": "Element Type",
        "group": "Common Keys and Solid"
      },
      "x-transport": {
        "uri": "db/ELEM",
        "methods": ["POST", "GET", "PUT", "DELETE"],
        "body-root": "Assign"
      }
    },
    "MATL": {
      "type": "integer",
      "x-ui": {
        "label": "Material No.",
        "group": "Common Keys and Solid"
      }
    },
    "SECT": {
      "type": "integer",
      "x-ui": {
        "label": "Section / Thickness No.",
        "group": "Common Keys and Solid",
        "visibleWhen": {
          "TYPE": ["BEAM", "TRUSS", "TENSTR", "COMPTR", "PLATE", "WALL", "PLSTRS", "PLSTRN", "AXISYM"]
        }
      }
    },
    "NODE": {
      "type": "array",
      "items": {
        "type": "integer"
      },
      "minItems": 2,
      "maxItems": 8,
      "x-node-count-by-type": {
        "BEAM": 2,
        "TRUSS": 2,
        "TENSTR": 2,
        "COMPTR": 2,
        "PLATE": [3, 4],
        "WALL": 4,
        "PLSTRS": [3, 4],
        "PLSTRN": [3, 4],
        "AXISYM": [3, 4],
        "SOLID": [4, 6, 8]
      },
      "x-ui": {
        "label": "Node No.",
        "group": "Common Keys and Solid"
      }
    },
    "ANGLE": {
      "type": "number",
      "default": 0,
      "x-ui": {
        "label": "Beta Angle",
        "visibleWhen": {
          "TYPE": ["BEAM", "TRUSS", "TENSTR", "COMPTR", "PLATE", "WALL", "PLSTRS", "PLSTRN", "AXISYM"]
        }
      }
    },
    "STYPE": {
      "type": "integer",
      "x-enum-by-type": {
        "TENSTR": [1, 2, 3],
        "COMPTR": [1, 2],
        "PLATE": [1, 2, 3, 4],
        "WALL": [1, 2],
        "PLSTRS": [1, 2]
      },
      "x-enum-labels-by-type": {
        "TENSTR": {
          "1": "Truss",
          "2": "Hook",
          "3": "Cable"
        },
        "COMPTR": {
          "1": "Truss",
          "2": "Gap"
        },
        "PLATE": {
          "1": "Thick",
          "2": "Thin",
          "3": "Thick with Drilling DOF",
          "4": "Thin with Drilling DOF"
        },
        "WALL": {
          "1": "Membrane",
          "2": "Plate"
        },
        "PLSTRS": {
          "1": "with Drilling DOF Inactive",
          "2": "with Drilling DOF Active"
        }
      },
      "x-ui": {
        "label": "Element Subtype",
        "visibleWhen": {
          "TYPE": ["TENSTR", "COMPTR", "PLATE", "WALL", "PLSTRS"]
        }
      }
    },
    "TENS": {
      "type": "number",
      "default": 0,
      "x-value-constraint": {
        "TENSTR": "Negative Value Only (Allowable Compression)",
        "COMPTR": "Positive Value Only (Allowable Tension)"
      },
      "x-ui": {
        "label": "Tension/Compression",
        "visibleWhen": {
          "TYPE": ["TENSTR", "COMPTR"]
        }
      }
    },
    "T_LIMIT": {
      "type": "number",
      "default": 0,
      "x-value-constraint": {
        "TENSTR": "Positive Value Only (Tension Limit Value)",
        "COMPTR": "Negative Value Only (Compression Limit Value)"
      },
      "x-ui": {
        "label": "Force Limit Value",
        "visibleWhen": {
          "TYPE": ["TENSTR", "COMPTR"]
        }
      }
    },
    "T_bLMT": {
      "type": "boolean",
      "default": false,
      "x-ui": {
        "label": "Use Force Limit",
        "visibleWhen": {
          "TYPE": ["TENSTR", "COMPTR"]
        }
      }
    },
    "NON_LEN": {
      "type": "number",
      "default": 0,
      "x-ui": {
        "label": "Nonlinear Length",
        "visibleWhen": {
          "TYPE": ["TENSTR", "COMPTR"]
        }
      }
    },
    "CABLE": {
      "type": "integer",
      "enum": [1, 2, 3],
      "x-enum-labels": {
        "1": "Pretension",
        "2": "Horizontal",
        "3": "Lu"
      },
      "x-ui": {
        "label": "Cable Type",
        "visibleWhen": {
          "TYPE": "TENSTR",
          "STYPE": 3
        }
      }
    },
    "C_RAT": {
      "type": "number",
      "x-ui": {
        "label": "Cable Length Ratio",
        "visibleWhen": {
          "TYPE": "TENSTR",
          "STYPE": 3
        }
      }
    },
    "WALL": {
      "type": "integer",
      "x-ui": {
        "label": "Wall ID",
        "visibleWhen": {
          "TYPE": "WALL"
        }
      }
    },
    "W_CON": {
      "type": "integer",
      "enum": [0, 1, 2],
      "x-enum-labels": {
        "0": "Beta Angle",
        "1": "Ref Point",
        "2": "Ref Vector"
      },
      "x-ui": {
        "label": "Orientation (Wall Beta Angle Only)",
        "visibleWhen": {
          "TYPE": "WALL"
        }
      }
    },
    "W_TYPE": {
      "type": "integer",
      "enum": [0, 1, 2],
      "default": 0,
      "x-enum-labels": {
        "0": "Plate base",
        "1": "CRB - Pin",
        "2": "CRB - Fixed"
      },
      "x-ui": {
        "label": "Wall Type",
        "visibleWhen": {
          "TYPE": "WALL"
        }
      }
    },
    "LCAXIS": {
      "type": "integer",
      "x-ui": {
        "label": "Local Axis"
      }
    }
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "TYPE": {
            "enum": ["BEAM", "TRUSS", "TENSTR", "COMPTR", "PLATE", "WALL", "PLSTRS", "PLSTRN", "AXISYM"]
          }
        }
      },
      "then": {
        "required": ["SECT"]
      }
    },
    {
      "if": {
        "properties": {
          "TYPE": {
            "const": "TENSTR"
          }
        }
      },
      "then": {
        "required": ["STYPE"]
      }
    },
    {
      "if": {
        "properties": {
          "TYPE": {
            "const": "TENSTR"
          },
          "STYPE": {
            "const": 3
          }
        }
      },
      "then": {
        "required": ["CABLE", "NON_LEN"]
      }
    },
    {
      "if": {
        "properties": {
          "TYPE": {
            "const": "COMPTR"
          }
        }
      },
      "then": {
        "required": ["STYPE"]
      }
    },
    {
      "if": {
        "properties": {
          "TYPE": {
            "const": "PLATE"
          }
        }
      },
      "then": {
        "required": ["STYPE"]
      }
    },
    {
      "if": {
        "properties": {
          "TYPE": {
            "const": "WALL"
          }
        }
      },
      "then": {
        "required": ["STYPE", "WALL", "W_CON"]
      }
    },
    {
      "if": {
        "properties": {
          "TYPE": {
            "const": "PLSTRS"
          }
        }
      },
      "then": {
        "required": ["STYPE"]
      }
    }
  ]
}
